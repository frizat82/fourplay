@page "/userManagement"

<PageTitle>Administrator User Management</PageTitle>
<MudContainer>
    <MudGrid>
        <MudItem xs="12">
            <MudText Align="Align.Center" Typo="Typo.h3">Assign a User to a League</MudText>
        </MudItem>
        <MudSpacer />
        <MudPaper Class="border-solid border-2 mud-border-primary pa-4" Elevation="3">
            <MudDataGrid Loading="@_loadingMappings" T="LeagueUserMapping" ReadOnly="true" Items="@_userMapping"
                EditMode="DataGridEditMode.Form" Bordered="true" Dense="true" EditTrigger="DataGridEditTrigger.Manual">
                <Columns>
                    <PropertyColumn Property="x => x.League.LeagueName" />
                    <PropertyColumn Property="x => x.User" />
                </Columns>
            </MudDataGrid>
        </MudPaper>
        <MudSpacer />
        <MudItem xs="12">
            <MudButton Variant="Variant.Filled" @onclick="AddMapping">Add User to a League</MudButton>
        </MudItem>
        <MudItem xs="12">
            <MudText Align="Align.Center" Typo="Typo.h3">Setup a New League</MudText>
        </MudItem>
        <MudSpacer />
        <MudPaper Class="border-solid border-2 mud-border-primary pa-4" Elevation="3">
            <MudDataGrid Loading="@_loadingJuice" T="LeagueJuiceMapping" ReadOnly="true" Items="@_leagueJuiceMapping"
                EditMode="DataGridEditMode.Form" Bordered="true" Dense="true" EditTrigger="DataGridEditTrigger.Manual">
                <Columns>
                    <PropertyColumn Property="x => x.League.LeagueName" />
                    <PropertyColumn Property="x => x.Juice" />
                </Columns>
            </MudDataGrid>
        </MudPaper>
        <MudSpacer />
        <MudItem xs="12">
            <MudButton Variant="Variant.Filled" @onclick="AddLeague">Add League</MudButton>
        </MudItem>
        <MudItem xs="12">
            <MudText Align="Align.Center" Typo="Typo.h3">Add User</MudText>
        </MudItem>
        <MudSpacer />
        <MudPaper Class="border-solid border-2 mud-border-primary pa-4" Elevation="3">
            <MudDataGrid Loading="@_loadingUsers" T="LeagueUsers" ReadOnly="true" Items="@_leagueUsers"
                EditMode="DataGridEditMode.Form" Bordered="true" Dense="true" EditTrigger="DataGridEditTrigger.Manual">
                <Columns>
                    <PropertyColumn Property="x => x.GoogleEmail" />
                </Columns>
            </MudDataGrid>
        </MudPaper>
        <MudSpacer />
        <MudItem xs="12">
            <MudButton Variant="Variant.Filled" @onclick="AddUser">Add User</MudButton>
        </MudItem>
        <MudItem xs="12">
            <MudText Align="Align.Center" Typo="Typo.h3">Admin Tasks</MudText>
        </MudItem>
        <MudItem xs="12">
            <MudButton Variant="Variant.Filled" @onclick="RunSpreads">Run Spreads Job</MudButton>
        </MudItem>
    </MudGrid>
</MudContainer>